



<h3 class="mb-4 mt-2">Update Inventory</h3>
    
        <form action="{% url 'keg_update' brewery.id %}" method="POST">
            {% csrf_token %}

            <div class="input-group mb-4">
                <span class="input-group-text" id="inputGroup-sizing-default">Beer/Size</span>
                <select name="beer" class="form-control bg-secondary text-white bg-opacity-25"
                  aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                  {%for keg in keg_data%}
                  <option value="{{keg.beer}}">{{keg.beer}}</option>
                  {% endfor %}
                </select>
              </div>
            <div class="input-group mb-4">
                <span class="input-group-text" id="inputGroup-sizing-default">Updated</span>
                <input type="date" name="brew_date"
                    class="form-control bg-secondary text-white bg-opacity-50 border border-secondary"
                    value="{{keg.brew_date}}" aria-label="Sizing example input"
                    aria-describedby="inputGroup-sizing-default" />
            </div>
            <div class="input-group mb-4">
                <span class="input-group-text" id="inputGroup-sizing-default">Category</span>
                <input type="text" name="category"
                    class="form-control bg-secondary text-white bg-opacity-50 border border-secondary"
                    value="{{keg.category}}" aria-label="Sizing example input"
                    aria-describedby="inputGroup-sizing-default" />
            </div>
            <div class="input-group mb-4">
                <span class="input-group-text">Quantity</span>
                <input name="quantity"
                    class="form-control bg-secondary text-white bg-opacity-50 border border-secondary"
                    value="{{keg.quantity}}" aria-label="Sizing example input"
                    aria-describedby="inputGroup-sizing-default" />
            </div>
            
            <button type="submit" class="mb-4 btn btn-outline-success">Submit</button><br>
            <a href="javascript:history.back()" class="btn btn-outline-success">Back</a>
        </form>

Total keg count code:

class Keg:

    def __init__(self, beer, quantity):
        self.beer = beer
        self.quantity = quantity


kegs = [
    Keg("Ale", 10),
    Keg("Lager", 25),
    Keg("Ale", 2),
    Keg("Stout", 4),
    Keg("Lager", 10)
]

from itertools import groupby
from operator import attrgetter

key = attrgetter("beer")

keg_totals = { beer: sum(keg.quantity for keg in group) for beer, group in groupby(sorted(kegs, key=key), key=key)}
print(keg_totals)

update_inventory

{% extends 'base_inventory.html' %} {% block content %}
<div class="container">
    <h3 class="mb-4 mt-2">Update Inventory</h3>
    <div class="col-md-4">
        <form action="{% url 'keg_update' keg.id pk%}" method="POST">
            {% csrf_token %}

            <div class="input-group mb-4">
                <span class="input-group-text" id="inputGroup-sizing-default">Beer/Size</span>
                <input type="text" name="beer"
                    class="form-control bg-secondary text-white bg-opacity-50 border border-secondary"
                    value="{{keg.beer}}" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>
            <div class="input-group mb-4">
                <span class="input-group-text" id="inputGroup-sizing-default">Category</span>
                <input type="text" name="category"
                    class="form-control bg-secondary text-white bg-opacity-50 border border-secondary"
                    value="{{keg.category}}" aria-label="Sizing example input"
                    aria-describedby="inputGroup-sizing-default" />
            </div>
            <div class="input-group mb-4">
                <span class="input-group-text">Quantity</span>
                <input name="quantity"
                    class="form-control bg-secondary text-white bg-opacity-50 border border-secondary"
                    value="{{keg.quantity}}" aria-label="Sizing example input"
                    aria-describedby="inputGroup-sizing-default" />
            </div>
           
            <button type="submit" class="mb-4 btn btn-outline-success">Submit</button><br>
            <a href="{% url 'add' pk %}" class="mb-4 btn btn-outline-success">Back to Inventory</a>
        </form>
    </div>
<div>
{% endblock %}

@login_required
def delete_order(request, id, pk):
    order = Order.objects.get(id = id)
    # order_data = Order.objects.filter(order = id)
    order.delete()
    return redirect('brew_details', pk)

path('delete_order/<int:id>/<pk>', views.delete_order, name = 'cancel'),

<div class="row my-4">
            <div class="col-md-12">
                <h3>Orders</h3>
                {% for order in order_data reversed %}
                <div class="col-md-12 table-responsive form-control rounded bg-secondary text-white bg-opacity-50 p-3 mb-2
                border border-secondary mb-4">
                    <table class="table text-white">
                        <thead>
                            <tr class="bg-success bg-opacity-50">
                                <th scope="col">Property</th>
                                <th scope="col">Order Date</th>
                                <th scope="col">Manager</th>
                                <th scope="col">Upadated</th>
                                <th scope="col">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{ order.property.name }} </td>
                                <td>{{ order.order_date }} </td>
                                <td>{{ order.manager}} </td>
                                <td>{{ order.updated}} </td>
                                <td>{{order.status }} </td>
                                <td>{{order.kegs.manager }} </td>
                            </tr>
                            <thead>
                                <tr class="bg-info bg-opacity-50">
                                    <th scope="col">Beer</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Brewery</th>
                                    <th scope="col">Upadated</th>
                                    <th scope="col">Status</th>
                                </tr>
                            </thead>
                            {% for keg in order.kegs.all %}
                            <tr>
                                <td>{{ keg.beer }} </td>
                                <td>{{ keg.quantity }} </td>
                                <td>{{ keg.brewery }} </td>
                                <td>{{ keg.updated }} </td>
                                <td>{{ keg.status }} </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% endfor %}
            </div>
        </div>

@login_required
def open_cart(request, id):
    current_user = request.user
    # print('USER ID', id)
    breweries = Brewery.objects.all()
    profile = UserProfile.objects.get(user_name=current_user)
    today = date.today()
    prop = profile.home_base
    order = Order.objects.create(
    manager=current_user, order_date=today, property=prop, cart_status='Open')
    context = {'order': order, 'breweries': breweries,
                   }
    return render(request, 'order/cart.html', context)

 counter = 0
    for keg in keg_data:
        counter2 = counter + 1
        while counter2 <= (len(keg_data)) -1:
            if (keg_data[counter].beer) == (keg_data[counter2].beer):
                (keg_data[counter2].quantity) = (keg_data[counter2].quantity) + (keg_data[counter].quantity)   
                counter2 += 1
            else:
                keg_totals[keg.beer] = keg.quantity     
            counter2 += 1      
        counter += 1

{% extends 'base.html' %} {% block content %}
<a href='/admin_page/'>Admin</a><br>
<h3>Add Route</h3>
<p>
<form action="{%url 'add_route' %}" method="POST">
    {% csrf_token %}

    Truck Number<br>
    <select name="truck_num">
        <option value="Truck 1">Truck 1</option>
        <option value="Truck 2">Truck 2</option>
        <option value="Truck 3">Truck 3</option>
    </select>
</p>
<p>
    Driver Name <br>
    {% if drivers %}
    <!-- <select name="properties"> -->
        {% for driver in drivers %}
        <option value="{{driver.id}}">{{driver}}</option>
        <input type="checkbox" id="{{driver.id}}" name="drivers" value="{{driver.id}}">
        <!-- <label for="{{driver.id}}">{{driver}}</label> -->
        {% endfor %}    
    <!-- </select> -->
</p>
    {% else %}
    <a href="{% url 'add_driver'%}">Add a driver first!</a>
    {% endif %}
<p>
    Day<br>
    <select name="day">
        <option value="Mon">Monday</option>
        <option value="Tue">Tuesday</option>
        <option value="Wed">Wednesday</option>
        <option value="Thu">Thursday</option>
        <option value="Fri">Friday</option>
        <option value="Sat">Saturday</option>
        <option value="Sun">Sunday</option>
    </select>
</p>
<p>
Add Route

    Property<br>
    {% if props %}
    <!-- <select name="properties"> -->
        {% for prop in props %}
        <option value="{{prop.id}}">{{prop}}</option>
        <input type="checkbox" id="{{prop.id}}" name="properties" value="{{prop.id}}">
        <!-- <label for="{{prop.id}}">{{prop}}</label> -->
        {% endfor %}    
    <!-- </select> -->
</p>  
    {% else %}
    <a href="{% url 'add_property'%}">Add a property first!</a>
    {% endif %}
<p>
    <button type="submit">Submit</button>
</p>
</form>

{% endblock %}

Add Property

{% extends 'base.html' %} {% block content %}
<a href='/admin_page/'>Admin</a><br>
<h3>Add Property</h3>

<form action="{%url 'add_property' %}" method="POST">
    {% csrf_token %}

    Code <br>
    <input type="text" name="code"/><br>
    Latitude <br>
    <input type="text" name="latitude"/><br>
    Longitude <br>
    <input type="text" name="longitude"/><br>
    Name <br>
    <input type="text" name="name"/><br>
    Phone # <br>
    <input type="text" name="phone_num"/><br>
    Address <br>
    <input type="text" name="address"/><br>
    City <br>
    <input type="text" name="city"/><br>
    State <br>
    <input type="text" name="state"/><br>
    Zipcode <br>
    <input type="text" name="zipcode"/><br>
    Manager <br>
    <input type="text" name="manager"/><br>
    Brewer <br>
    <input type="text" name="brewer"/><br>
    Deliveries <br>
    <input type="text" name="delivery"/><br>
    Notes <br>
    <textarea rows="6" name="notes"></textarea><br>
    <button type="submit">Submit</button>
</form>

{% endblock %}

Add Driver

{% extends 'base.html' %} {% block content %}
<a href='/admin_page/'>Admin</a><br>
<h3>Add Driver</h3>

<form action="{%url 'add_driver' %}" method="POST">
    {% csrf_token %}

    First name<br>
    <input type="text" name="first_name" /><br>
    Last name<br>
    <input type="text" name="last_name" /><br>
    Phone #<br>
    <input type="text" name="phone_num" /><br>
    <p>
        <button type="submit">Submit</button>
    </p>
</form>

{% endblock %}